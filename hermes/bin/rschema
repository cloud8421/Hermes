#!/usr/bin/env bash

# usage: rschema users

awk "/create_table \"$1\"/, /  end/ { print $2 }" db/schema.rb | # extract table
sed '1d;$d' | # remove surrounding block
cut -d . -f 2 | # remove object
sed 's/,//' | # remove commas
sed 's/"/:/' | # changes first " with :
sed 's/"//' | # remove "
awk '{print "-> " $2,$1}' | # swap column order
sort |
column -t |
pygmentize -l ruby
